!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("preact"),require("redux")):"function"==typeof define&&define.amd?define(["preact","redux"],e):t.preactRedux=e(t.preact,t.Redux)}(this,function(t,e){"use strict";function n(){}function r(){var t=[],e=[];return{clear:function(){e=$,t=$},notify:function(){for(var n=t=e,r=0;r<n.length;r++)n[r]()},get:function(){return e},subscribe:function(n){var r=!0;return e===t&&(e=t.slice()),e.push(n),function(){r&&t!==$&&(r=!1,e===t&&(e=t.slice()),e.splice(e.indexOf(n),1))}}}}function o(){}function i(t,e){var n={run:function(r){try{var o=t(e.getState(),r);(o!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=o,n.error=null)}catch(t){n.shouldComponentUpdate=!0,n.error=t}}};return n}function s(e){var n,r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=s.getDisplayName,p=void 0===u?function(t){return"ConnectAdvanced("+t+")"}:u,c=s.methodName,a=void 0===c?"connectAdvanced":c,d=s.renderCountProp,f=void 0===d?void 0:d,l=s.shouldHandleStateChanges,h=void 0===l||l,b=s.storeKey,y=void 0===b?"store":b,v=s.withRef,m=void 0!==v&&v,P=K(s,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),O=y+"Subscription",S=nt++,g=(n={},n[y]=F,n[O]=I,n),w=(r={},r[O]=I,r);return function(n){var r=n.displayName||n.name||"Component",s=p(r),u=A({},P,{getDisplayName:p,methodName:a,renderCountProp:f,shouldHandleStateChanges:h,storeKey:y,withRef:m,displayName:s,wrappedComponentName:r,WrappedComponent:n}),c=function(r){function s(t,e){var n=k(this,r.call(this,t,e));return n.version=S,n.state={},n.renderCount=0,n.store=t[y]||e[y],n.propsMode=!!t[y],n.setWrappedInstance=n.setWrappedInstance.bind(n),n.initSelector(),n.initSubscription(),n}return _(s,r),s.prototype.getChildContext=function(){var t,e=this.propsMode?null:this.subscription;return t={},t[O]=e||this.context[O],t},s.prototype.componentDidMount=function(){h&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},s.prototype.componentWillReceiveProps=function(t){this.selector.run(t)},s.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},s.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=o,this.store=null,this.selector.run=o,this.selector.shouldComponentUpdate=!1},s.prototype.getWrappedInstance=function(){return this.wrappedInstance},s.prototype.setWrappedInstance=function(t){this.wrappedInstance=t},s.prototype.initSelector=function(){this.selector=i(e(this.store.dispatch,u),this.store),this.selector.run(this.props)},s.prototype.initSubscription=function(){if(h){this.subscription=new et(this.store,(this.propsMode?this.props:this.context)[O],this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},s.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(rt)):this.notifyNestedSubs()},s.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},s.prototype.isSubscribed=function(){return!!this.subscription&&this.subscription.isSubscribed()},s.prototype.addExtraProps=function(t){if(!(m||f||this.propsMode&&this.subscription))return t;var e=A({},t);return m&&(e.ref=this.setWrappedInstance),f&&(e[f]=this.renderCount++),this.propsMode&&this.subscription&&(e[O]=this.subscription),e},s.prototype.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return t.h(n,this.addExtraProps(e.props))},s}(t.Component);return c.WrappedComponent=n,c.displayName=s,c.childContextTypes=w,c.contextTypes=g,c.prototype.componentWillUpdate=function(){var t=this;if(this.version!==S){this.version=S,this.initSelector();var e=[];this.subscription&&(e=this.subscription.listeners.get(),this.subscription.tryUnsubscribe()),this.initSubscription(),h&&(this.subscription.trySubscribe(),e.forEach(function(e){return t.subscription.listeners.subscribe(e)}))}},Z(c,n)}}function u(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!==t&&e!==e}function p(t,e){if(u(t,e))return!0;if("object"!==(void 0===t?"undefined":H(t))||null===t||"object"!==(void 0===e?"undefined":H(e))||null===e)return!1;var n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(var r=0;r<n.length;r++)if(!ot.call(e,n[r])||!u(t[n[r]],e[n[r]]))return!1;return!0}function c(t){var e=at.call(t,ft),n=t[ft];try{t[ft]=void 0;var r=!0}catch(t){}var o=dt.call(t);return r&&(e?t[ft]=n:delete t[ft]),o}function a(t){return ht.call(t)}function d(t){return null==t?void 0===t?yt:bt:vt&&vt in Object(t)?c(t):a(t)}function f(t){return null!=t&&"object"==(void 0===t?"undefined":H(t))}function l(t){if(!f(t)||d(t)!=Pt)return!1;var e=mt(t);if(null===e)return!0;var n=wt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&gt.call(n)==Ct}function h(t){l(t)}function b(t){return function(e,n){function r(){return o}var o=t(e,n);return r.dependsOnOwnProps=!1,r}}function y(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?!!t.dependsOnOwnProps:1!==t.length}function v(t,e){return function(n,r){var o=r.displayName,i=function(t,e){return i.dependsOnOwnProps?i.mapToProps(t,e):i.mapToProps(t)};return i.dependsOnOwnProps=!0,i.mapToProps=function(n,r){i.mapToProps=t,i.dependsOnOwnProps=y(t);var s=i(n,r);return"function"==typeof s&&(i.mapToProps=s,i.dependsOnOwnProps=y(s),s=i(n,r)),h(s,o,e),s},i}}function m(t){return"function"==typeof t?v(t,"mapDispatchToProps"):void 0}function P(t){return t?void 0:b(function(t){return{dispatch:t}})}function O(t){return t&&"object"===(void 0===t?"undefined":H(t))?b(function(n){return e.bindActionCreators(t,n)}):void 0}function S(t){return"function"==typeof t?v(t,"mapStateToProps"):void 0}function g(t){return t?void 0:b(function(){return{}})}function w(t,e,n){return A({},n,t,e)}function C(t){return function(e,n){var r=n.displayName,o=n.pure,i=n.areMergedPropsEqual,s=!1,u=void 0;return function(e,n,p){var c=t(e,n,p);return s?o&&i(c,u)||(u=c):(s=!0,u=c,h(u,r,"mergeProps")),u}}}function j(t){return"function"==typeof t?C(t):void 0}function N(t){return t?void 0:function(){return w}}function T(t,e,n){if(!t)throw Error("Unexpected value for "+e+" in "+n+".");"mapStateToProps"!==e&&"mapDispatchToProps"!==e||t.hasOwnProperty("dependsOnOwnProps")}function q(t,e,n,r){T(t,"mapStateToProps",r),T(e,"mapDispatchToProps",r),T(n,"mergeProps",r)}function E(t,e,n,r){return function(o,i){return n(t(o,i),e(r,i),i)}}function x(t,e,n,r,o){function i(o,i){return h=o,b=i,y=t(h,b),v=e(r,b),m=n(y,v,b),l=!0,m}function s(){return y=t(h,b),e.dependsOnOwnProps&&(v=e(r,b)),m=n(y,v,b)}function u(){return t.dependsOnOwnProps&&(y=t(h,b)),e.dependsOnOwnProps&&(v=e(r,b)),m=n(y,v,b)}function p(){var e=t(h,b),r=!f(e,y);return y=e,r&&(m=n(y,v,b)),m}function c(t,e){var n=!d(e,b),r=!a(t,h);return h=t,b=e,n&&r?s():n?u():r?p():m}var a=o.areStatesEqual,d=o.areOwnPropsEqual,f=o.areStatePropsEqual,l=!1,h=void 0,b=void 0,y=void 0,v=void 0,m=void 0;return function(t,e){return l?c(t,e):i(t,e)}}function U(t,e){var n=e.initMapStateToProps,r=e.initMapDispatchToProps,o=e.initMergeProps,i=K(e,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),s=n(t,i),u=r(t,i),p=o(t,i);return q(s,u,p,i.displayName),(i.pure?x:E)(s,u,p,t,i)}function D(t,e,n){for(var r=e.length-1;r>=0;r--){var o=e[r](t);if(o)return o}return function(e,r){throw Error("Invalid value of type "+(void 0===t?"undefined":H(t))+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function M(t,e){return t===e}var R={only:function(t){return t&&t[0]||null}};n.isRequired=n;var W={element:n,func:n,shape:function(){return n},instanceOf:function(){return n}},I=W.shape({trySubscribe:W.func.isRequired,tryUnsubscribe:W.func.isRequired,notifyNestedSubs:W.func.isRequired,isSubscribed:W.func.isRequired}),F=W.shape({subscribe:W.func.isRequired,dispatch:W.func.isRequired,getState:W.func.isRequired}),H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},K=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},k=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},z=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",r=arguments[1],o=r||n+"Subscription",i=function(t){function e(e,r){var o=k(this,t.call(this,e,r));return o[n]=e.store,o}return _(e,t),e.prototype.getChildContext=function(){var t;return t={},t[n]=this[n],t[o]=null,t},e.prototype.render=function(){return R.only(this.props.children)},e}(t.Component);return i.prototype.componentWillReceiveProps=function(){},i.childContextTypes=(e={},e[n]=F.isRequired,e[o]=I,e),i}(),B={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},G={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},J=Object.defineProperty,L=Object.getOwnPropertyNames,Q=Object.getOwnPropertySymbols,V=Object.getOwnPropertyDescriptor,X=Object.getPrototypeOf,Y=X&&X(Object),Z=function t(e,n,r){if("string"!=typeof n){if(Y){var o=X(n);o&&o!==Y&&t(e,o,r)}var i=L(n);Q&&(i=i.concat(Q(n)));for(var s=0;s<i.length;++s){var u=i[s];if(!(B[u]||G[u]||r&&r[u])){var p=V(n,u);try{J(e,u,p)}catch(t){}}}return e}return e},$=null,tt={notify:function(){}},et=function(){function t(t,e,n){this.store=t,this.parentSub=e,this.onStateChange=n,this.unsubscribe=null,this.listeners=tt}return t.prototype.addNestedSub=function(t){return this.trySubscribe(),this.listeners.subscribe(t)},t.prototype.notifyNestedSubs=function(){this.listeners.notify()},t.prototype.isSubscribed=function(){return!!this.unsubscribe},t.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=r())},t.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=tt)},t}(),nt=0,rt={},ot=Object.prototype.hasOwnProperty,it="object"==("undefined"==typeof global?"undefined":H(global))&&global&&global.Object===Object&&global,st="object"==("undefined"==typeof self?"undefined":H(self))&&self&&self.Object===Object&&self,ut=it||st||Function("return this")(),pt=ut.Symbol,ct=Object.prototype,at=ct.hasOwnProperty,dt=ct.toString,ft=pt?pt.toStringTag:void 0,lt=Object.prototype,ht=lt.toString,bt="[object Null]",yt="[object Undefined]",vt=pt?pt.toStringTag:void 0,mt=function(t,e){return function(n){return t(e(n))}}(Object.getPrototypeOf,Object),Pt="[object Object]",Ot=Function.prototype,St=Object.prototype,gt=Ot.toString,wt=St.hasOwnProperty,Ct=gt.call(Object),jt=[m,P,O],Nt=[S,g],Tt=[j,N];return{Provider:z,connect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.connectHOC,n=void 0===e?s:e,r=t.mapStateToPropsFactories,o=void 0===r?Nt:r,i=t.mapDispatchToPropsFactories,u=void 0===i?jt:i,c=t.mergePropsFactories,a=void 0===c?Tt:c,d=t.selectorFactory,f=void 0===d?U:d;return function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=i.pure,c=void 0===s||s,d=i.areStatesEqual,l=void 0===d?M:d,h=i.areOwnPropsEqual,b=void 0===h?p:h,y=i.areStatePropsEqual,v=void 0===y?p:y,m=i.areMergedPropsEqual,P=void 0===m?p:m,O=K(i,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),S=D(t,o,"mapStateToProps"),g=D(e,u,"mapDispatchToProps"),w=D(r,a,"mergeProps");return n(f,A({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:!!t,initMapStateToProps:S,initMapDispatchToProps:g,initMergeProps:w,pure:c,areStatesEqual:l,areOwnPropsEqual:b,areStatePropsEqual:v,areMergedPropsEqual:P},O))}}(),connectAdvanced:s}});
//# sourceMappingURL=preact-redux.min.js.map